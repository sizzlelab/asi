<%= doc_title '/channels/&lt;channel_id&gt;/@messages' %>

<p>A resource for accessing messages in a single channel in OtaSizzle.</p>

<%
methods = [ { :name => "GET", 
							:description => "List channel's messages. By default the messages are ordered descending by 'updated_at'.",
							:parameters => [ { :page => "Pagination page." },
															 { :per_page => "Pagination per page." },
															 { :search => "Search parameter to search from channel's messages." },
															 { :sort_order => "Changes the sort order of messages. Allowed values are 'ascending' and 'descending'."}
														 ],
							:returns => { "200" => "Returns messages in json's entry -field.",
														"403" => "User has no access to channel.",
								 				 		"404" => "Channel not found." }
						}, 
						{	:name => "POST",
							:description => "Post a message to channel. Messages poster is set to current user and channel to 'channel_id'.",
							:parameters => [ :message => [ { :title => "Message title" },
															 { :body => "Message content. Text only." },
															 { :attachment => "Attachment. Currently only urls are advised to be used. In any case the handling of the attachment-field's content is left for the client."},
															 { :content_type => "Message's attachment's content type."},
															 { :reference_to => "Message id that this message is a reply to."} ]
															],
							:returns => { "201" => "Created. Response includes created message in json's entry -field.",
								 						"400" => "Invalid parameters. Errors are listed in json's messages -field.",
								 						"403" => "User has no rights to post to channel.",
														"404" => "Channel not found."} 
							} ]

%>

<%= render :partial => "doc/methods", :locals => { :methods => methods } %>

<h2>Subresources</h2>

<ul>
	<li><a href="doc/channels/channel_id/@messages/msg_id"><tt>/channels/&lt;channel_id&gt;/@messages/&lt;msg_id&gt;</tt></a> &ndash; Single message</li>
</ul>