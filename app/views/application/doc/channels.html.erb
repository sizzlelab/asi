<%= doc_title '/channels' %>

<p>A resource for accessing channels in OtaSizzle</p>

<%
methods = [ { :name => "GET", 
							:description => "List channels current user has access to matching any of the parameters.",
							:parameters => [ { :search => "Search term for text search from channel name and description." },
								 							 { :group_id => "Group id." },
															 { :person_id => "Person id." }
														 ],
							:returns => { "200" => "List of matching and accessible channels or all channels if search terms are omitted. If no channels match an empty array is returned."} }, 
						{	:name => "POST",
							:description => "Creates a channel. Parameters are optional. Current user is set to channel owner and subscribed to the channel. If channel type == group, only a single group_subscription must be passed and name defaults to that group's name.",
							:parameters => [ { :name => "Channel name" },
															 { :description => "Channel description" },
															 { :user_subscriptions => "List of user ids subscripted to the channel."},
															 { :group_subscriptions => "List of group ids subscripted to the channel." },
															 { :type => "Channel type. Currently public, group and friend channels are supported. Default is public."}
															],
							:returns => { "201" => "Created. Response contains created channel.",
														"400" => "Bad request",
														"401" => "Login required." } 
							} ]

%>

<%= render :partial => "doc/methods", :locals => { :methods => methods } %>

<h2>Subresources</h2>

<ul>
	<li><a href="doc/channels/channel_id"><tt>/channels/&lt;channel_id&gt;</tt></a> &ndash; A single channel.</li>
	<li><a href="doc/channels/channel_id/@messages"><tt>/channels/&lt;channel_id&gt;/@messages</tt></a> &ndash; Messages for a channel.</li>
	<li><a href="doc/channels/channel_id/@messages/msg_id"><tt>/channels/&lt;channel_id&gt;/@messages/&lt;msg_id&gt;</tt></a> &ndash; Single message.</li>
	<li><a href="doc/channels/channel_id/@subscriptions"><tt>/channels/&lt;channel_id&gt;/@subscriptions</tt></a> &ndash; Channel subscriptions.</li>
</ul>